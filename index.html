<!DOCTYPE html>


<meta charset="utf-8">
<title>BCDC CKAN API Demo Page</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width">
<link rel="shortcut icon" href="/favicon.ico">
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">  
<link rel="stylesheet" href="http://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css">  

<!-- build:css(.tmp) styles/main.css -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.7/css/jquery.dataTables.css">
<link rel='stylesheet' href="//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js">
<!-- {{DOMAIN}}api/3/action/package_search?q=sub_org:"04215a2c-c0b4-4829-a082-bb9467f20e1c"-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- DataTables -->
<script src="https://cdn.datatables.net/1.10.5/js/jquery.dataTables.min.js"></script>
<style>
body { font-size: 140%; }
</style>
<!-- <input type='button' value='request' id='ajaxButton' /> -->
<script type="text/javascript">
// var $t = $('#example').DataTable();
// $(document).ready(function() {
    
var counter = 1;
var url = 'https://api.bcdevexchange.org/bcdc/3/action/package_search?q=sub_org:"e51a8106-11c7-4436-a967-7cee18bfb159"&rows=1000';
$.ajax({
    url: url,

    success: function(data) {
        $('#example').dataTable({
            data: data.result.results,
            columns: [{
                data,
                render: function(data, type, row) {
                    urlstring = 'http://catalogue.data.gov.bc.ca/dataset/' + data['name'];
                    hyperstring = "<a href=" + urlstring + ">" + data['title'] + "</a>";
                    return hyperstring;
                }
            }, {
                data: 'notes'
            }, {
                data: "license_title"
            }]
        });
    }



});



// $t.row.add( [
//             counter +'.1',
//             counter +'.2',
//             counter +'.3'
//         ] ).draw()
// })
// var counter = 1;

// $('#addRow').click();

// $('#addRow').on( 'click', function () {
//     console.log(counter)
//  } );
 
</script>



<body>

<!-- <button id="addRow">Add new row</button>
 -->      <div class="container">
        <div class="header">
          <ul class="nav nav-pills pull-right">
            <!-- <li class="active"><a href="#">PackageSearch</a></li>
            <li><a href="#">DataStore</a></li>
            <li><a href="#">PackageShow</a></li> -->
        </ul>
        <h3 class="text-muted">BCDC API Demo Page</h3>
    </div>

    <div class="row marketing">
        <div class="col-lg-8">
            <h3>Demonstration of BC Data Catalogue API</h3>
            <p>Powered by CKAN the BC Data Catalogue has a rich API that allows ... </p>
        </div>
    </div>

    <div class="row marketing">
        <div class="col-lg-8">
            <h4>GeoBC Branch Records</h4>
            <p>The table below is taken live from the BC Data Catalogue content. </p>
        </div>
    </div>


    <div class="col-md-8">
        <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">    <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>License</th>
            </tr>
        </thead>

        <tfoot>
            <tr>
                <th>title</th>
                <th>notes</th>
                <th>license</th>
            </tr>
        </tfoot>


    </tbody>
</table>
</div>


<div class="footer">
    <!-- <p>
      Draft 1.03</p> -->
  </div>

</div>




</body>

</html>
